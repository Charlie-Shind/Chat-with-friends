{"version":3,"sources":["webpack:///D:/List/ceshi/uniapp/components/fa-payment/fa-payment.vue?1ad8","webpack:///D:/List/ceshi/uniapp/components/fa-payment/fa-payment.vue?8786","webpack:///D:/List/ceshi/uniapp/components/fa-payment/fa-payment.vue?2c4f","webpack:///D:/List/ceshi/uniapp/components/fa-payment/fa-payment.vue?26b5","uni-app:///components/fa-payment/fa-payment.vue","webpack:///D:/List/ceshi/uniapp/components/fa-payment/fa-payment.vue?7525","webpack:///D:/List/ceshi/uniapp/components/fa-payment/fa-payment.vue?cfbd"],"names":["mixins","props","title","type","default","subtitle","money","vip","source","params","data","isShow","paytype","computed","paytypelist","list","name","value","icon","iconColor","color","isWeixin","payStyle","style","methods","show","close","selectType","paySuccess","console","checkDefaultPaytype","available","submit","openid","method","res","uni","provider","timeStamp","nonceStr","package","signType","paySign","success","fail"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuH;AACvH;AAC8D;AACL;AACc;;;AAGvE;AACsL;AACtL,gBAAgB,wLAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,qFAAM;AACR,EAAE,8FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,yFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,6MAEN;AACP,KAAK;AACL;AACA,aAAa,uMAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,aAAa,qOAEN;AACP,KAAK;AACL;AACA,aAAa,6MAEN;AACP,KAAK;AACL;AACA,aAAa,mNAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACpFA;AAAA;AAAA;AAAA;AAAyrB,CAAgB,2qBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;AC6C7sB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA;EACAA;EACAC;IACA;IACAC;MACAC;MACAC;IACA;IACA;IACAC;MACAF;MACAC;IACA;IACA;IACAE;MACAH;MACAC;IACA;IACA;IACAG;MACAJ;MACAC;IACA;IACA;IACAI;MACAL;MACAC;IACA;IACA;IACAK;MACAN;MACAC;IACA;EACA;EACAM;IACA;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA;QACA;QACA;QACAA;UACA;YACA;cAEAC;gBACAC;gBACAC;gBACAC;gBACAC;kBAAAC;gBAAA;cACA;cAEA;YACA;cAWA;YACA;cACAL;gBACAC;gBACAC;gBACAC;gBACAC;kBAAAC;gBAAA;cACA;cACA;UAAA;QAEA;QACA;MACA;MACA;IACA;IACAC;MAMA;IAEA;IACAC;MACA;MACA;QACAC;MACA;QACAA;MACA;MACA;IACA;EACA;EACAC;IACAC;MACA;MAUA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACAC;MACA;MACA;MACA;IACA;IACAC;MACA;QACA;MACA;MACA;MACA;MACAf;QACAgB;MACA;MACA;QACA;MACA;IACA;IACAC;MAAA;QAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IACA;kBAAA;kBAAA;gBAAA;gBACA;gBAAA;cAAA;gBAGAtB;kBACAE;kBACAqB;kBACAC;gBACA;gBAQAxB;gBACA;gBAAA,cACA;gBAAA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA;cAAA;gBAAA;cAAA;gBAAAA;gBAAA,MAWA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA;cAAA;gBAAAyB;gBAAA;gBAAA;cAAA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA;cAAA;gBAAAA;cAAA;gBAAA,IAEAA;kBAAA;kBAAA;gBAAA;gBACA;gBAAA;cAAA;gBAAA,IAIAA;kBAAA;kBAAA;gBAAA;gBACA;gBAAA;cAAA;gBAAA,MAKA;kBAAA;kBAAA;gBAAA;gBACA;gBACA;gBAAA;cAAA;gBAKAC;kBACAC;kBACAC;kBACAC;kBACAC;kBACAC;kBACAC;kBACAC;oBACA;oBACA;kBACA;kBACAC;oBACAf;oBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAiFA;MAAA;QAAA;MAAA;MAAA;IAAA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AClVA;AAAA;AAAA;AAAA;AAAwyC,CAAgB,ssCAAG,EAAC,C;;;;;;;;;;;ACA5zC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/fa-payment/fa-payment.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./fa-payment.vue?vue&type=template&id=6fde1344&\"\nvar renderjs\nimport script from \"./fa-payment.vue?vue&type=script&lang=js&\"\nexport * from \"./fa-payment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./fa-payment.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/fa-payment/fa-payment.vue\"\nexport default component.exports","export * from \"-!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./fa-payment.vue?vue&type=template&id=6fde1344&\"","var components\ntry {\n  components = {\n    uPopup: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-popup/u-popup\" */ \"@/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-icon/u-icon\" */ \"@/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uRadioGroup: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-radio-group/u-radio-group\" */ \"@/uview-ui/components/u-radio-group/u-radio-group.vue\"\n      )\n    },\n    uCellItem: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-cell-item/u-cell-item\" */ \"@/uview-ui/components/u-cell-item/u-cell-item.vue\"\n      )\n    },\n    uRadio: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-radio/u-radio\" */ \"@/uview-ui/components/u-radio/u-radio.vue\"\n      )\n    },\n    uButton: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-button/u-button\" */ \"@/uview-ui/components/u-button/u-button.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var s0 = _vm.__get_style([_vm.payStyle])\n  var a0 = {\n    width: \"80%\",\n    height: \"60rpx\",\n    backgroundColor: _vm.theme.bgColor,\n    color: _vm.theme.color,\n  }\n  var a1 =\n    _vm.vip > 0\n      ? {\n          width: \"80%\",\n          height: \"60rpx\",\n          backgroundColor: \"#18b566\",\n          color: _vm.theme.color,\n        }\n      : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        s0: s0,\n        a0: a0,\n        a1: a1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./fa-payment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./fa-payment.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<u-popup v-model=\"isShow\" mode=\"center\" border-radius=\"5\" z-index=\"1000\">\r\n\t\t\t<view class=\"payment\" :style=\"[payStyle]\">\r\n\t\t\t\t<view class=\"header u-flex u-row-between u-p-l-30 u-p-r-30 u-p-t-20 u-p-b-20\">\r\n\t\t\t\t\t<view class=\"\">{{ title }}</view>\r\n\t\t\t\t\t<u-icon name=\"close\" @click=\"close\"></u-icon>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"u-p-30\">\r\n\t\t\t\t\t<view class=\"alert-warning u-p-20 u-m-b-10\">\r\n\t\t\t\t\t\t<view class=\"\" v-if=\"subtitle\">{{ subtitle }}</view>\r\n\t\t\t\t\t\t<view class=\"price u-m-t-10\">需支付金额：￥{{ money }}</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"u-border-top u-m-t-20\">\r\n\t\t\t\t\t\t<u-radio-group v-model=\"paytype\" class=\"group\">\r\n\t\t\t\t\t\t\t<view class=\"group\" v-for=\"(item, index) in paytypelist\" :key=\"index\">\r\n\t\t\t\t\t\t\t\t<u-cell-item :icon=\"item.icon\" :icon-style=\"item.iconColor\" :arrow=\"false\" :title=\"item.name\" @click=\"selectType(item.value)\">\r\n\t\t\t\t\t\t\t\t\t<u-radio slot=\"right-icon\" :active-color=\"theme.bgColor\" label-size=\"30\" :name=\"item.value\">\r\n\t\t\t\t\t\t\t\t\t\t<u-icon size=\"30\" name=\"arrow-right\"></u-icon>\r\n\t\t\t\t\t\t\t\t\t</u-radio>\r\n\t\t\t\t\t\t\t\t</u-cell-item>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</u-radio-group>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"u-text-center u-p-30\">\r\n\t\t\t\t\t<view class=\"\">\r\n\t\t\t\t\t\t<u-button type=\"primary\" hover-class=\"none\" :custom-style=\"{ width: '80%', height: '60rpx', backgroundColor: theme.bgColor, color: theme.color }\" size=\"mini\" @click=\"submit\">\r\n\t\t\t\t\t\t\t立即支付\r\n\t\t\t\t\t\t</u-button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"u-m-t-30\" v-if=\"vip > 0\">\r\n\t\t\t\t\t\t<u-button type=\"primary\" hover-class=\"none\" size=\"mini\" :custom-style=\"{ width: '80%', height: '60rpx', backgroundColor: '#18b566', color: theme.color }\" @click=\"goPage('/pages/my/member?vip='+vip)\">\r\n\t\t\t\t\t\t\t升级VIP{{ vip }},免费阅读\r\n\t\t\t\t\t\t</u-button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</u-popup>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport { loginfunc } from '@/common/fa.mixin.js'\r\n\texport default {\r\n\t\tmixins: [loginfunc],\r\n\t\tprops: {\r\n\t\t\t//订单标题\r\n\t\t\ttitle: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: '付费阅读'\r\n\t\t\t},\r\n\t\t\t//订单子标题\r\n\t\t\tsubtitle: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: ''\r\n\t\t\t},\r\n\t\t\t//订单金额\r\n\t\t\tmoney: {\r\n\t\t\t\ttype: [String, Number],\r\n\t\t\t\tdefault: 0\r\n\t\t\t},\r\n\t\t\t//VIP等级\r\n\t\t\tvip: {\r\n\t\t\t\ttype: [String, Number],\r\n\t\t\t\tdefault: 0\r\n\t\t\t},\r\n\t\t\t//来源\r\n\t\t\tsource: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'archives'\r\n\t\t\t},\r\n\t\t\t// 透传参数\r\n\t\t\tparams: {\r\n\t\t\t\ttype: Object,\r\n\t\t\t\tdefault: {}\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tisShow: false,\r\n\t\t\t\tpaytype: ''\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tpaytypelist() {\r\n\t\t\t\tif (this.vuex_config.paytypelist) {\r\n\t\t\t\t\tlet paytypelist = this.vuex_config.paytypelist.split(',');\r\n\t\t\t\t\tlet list = [];\r\n\t\t\t\t\tpaytypelist.map(item => {\r\n\t\t\t\t\t\tswitch (item) {\r\n\t\t\t\t\t\t\tcase 'wechat':\r\n\t\t\t\t\t\t\t\t// #ifdef APP-PLUS || MP-WEIXIN || H5\r\n\t\t\t\t\t\t\t\tlist.push({\r\n\t\t\t\t\t\t\t\t\tname: '微信支付',\r\n\t\t\t\t\t\t\t\t\tvalue: 'wechat',\r\n\t\t\t\t\t\t\t\t\ticon: 'weixin-circle-fill',\r\n\t\t\t\t\t\t\t\t\ticonColor: { color: '#40BA49' }\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'alipay':\r\n\t\t\t\t\t\t\t\t// #ifdef APP-PLUS || H5\r\n\t\t\t\t\t\t\t\tif (!this.isWeixin) {\r\n\t\t\t\t\t\t\t\t\tlist.push({\r\n\t\t\t\t\t\t\t\t\t\tname: '支付宝支付',\r\n\t\t\t\t\t\t\t\t\t\tvalue: 'alipay',\r\n\t\t\t\t\t\t\t\t\t\ticon: 'zhifubao-circle-fill',\r\n\t\t\t\t\t\t\t\t\t\ticonColor: { color: '#00AAEE' }\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'balance':\r\n\t\t\t\t\t\t\t\tlist.push({\r\n\t\t\t\t\t\t\t\t\tname: '余额支付',\r\n\t\t\t\t\t\t\t\t\tvalue: 'balance',\r\n\t\t\t\t\t\t\t\t\ticon: 'rmb-circle-fill',\r\n\t\t\t\t\t\t\t\t\ticonColor: { color: '#f39c12' }\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn list;\r\n\t\t\t\t}\r\n\t\t\t\treturn [];\r\n\t\t\t},\r\n\t\t\tisWeixin() {\r\n\t\t\t\t// #ifndef MP-WEIXIN\r\n\t\t\t\treturn this.$util.isWeiXinBrowser()\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\treturn true;\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\tpayStyle() {\r\n\t\t\t\tlet style = {};\r\n\t\t\t\tif (this.vip > 0) {\r\n\t\t\t\t\tstyle.height = this.paytypelist.length == 3 ? '870rpx' : this.paytypelist.length == 2 ? '770rpx' : '670rpx';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstyle.height = this.paytypelist.length == 3 ? '770rpx' : this.paytypelist.length == 2 ? '670rpx' : '570rpx'\r\n\t\t\t\t}\r\n\t\t\t\treturn style;\r\n\t\t\t},\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tshow() {\r\n\t\t\t\tthis.checkDefaultPaytype();\r\n\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\t//如果在微信内，未设置openid则跳转获取openid\r\n\t\t\t\tif (!this.vuex_openid && this.$util.isWeiXinBrowser()) {\r\n\t\t\t\t\tthis.goAuth('/pages/login/openid', 'snsapi_base');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\tthis.isShow = true;\r\n\t\t\t},\r\n\t\t\tclose() {\r\n\t\t\t\tthis.isShow = false;\r\n\t\t\t},\r\n\t\t\tselectType(paytype) {\r\n\t\t\t\tthis.paytype = paytype;\r\n\t\t\t},\r\n\t\t\tpaySuccess() {\r\n\t\t\t\tconsole.log(\"paySuccess\");\r\n\t\t\t\tthis.close();\r\n\t\t\t\tthis.$emit('paySuccess');\r\n\t\t\t\tthis.close();\r\n\t\t\t},\r\n\t\t\tcheckDefaultPaytype() {\r\n\t\t\t\tif (this.vuex_config.defaultpaytype) {\r\n\t\t\t\t\tthis.paytype = this.vuex_config.defaultpaytype;\r\n\t\t\t\t}\r\n\t\t\t\tlet available = [];\r\n\t\t\t\tlet list = this.paytypelist;\r\n\t\t\t\tlist.map(item => {\r\n\t\t\t\t\tavailable.push(item.value);\r\n\t\t\t\t});\r\n\t\t\t\tif (available.indexOf(this.paytype) === -1) {\r\n\t\t\t\t\tthis.paytype = available[0];\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubmit: async function() {\r\n\t\t\t\tif (!this.paytype) {\r\n\t\t\t\t\tthis.$u.toast('请选择支付方式！');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet data = Object.assign({\r\n\t\t\t\t\tpaytype: this.paytype,\r\n\t\t\t\t\topenid: this.vuex_openid,\r\n\t\t\t\t\tmethod: 'web'\r\n\t\t\t\t}, this.params || {});\r\n\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tdata.appid = plus.runtime.appid;\r\n\t\t\t\tdata.method = 'app';\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\tdata.method = 'miniapp';\r\n\t\t\t\t//获取openid\r\n\t\t\t\tdata.openid = this.vuex_openid || await this.getWechatOpenid();\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tdata.method = 'web';\r\n\t\t\t\t//如果为微信支付，且在微信内则指定为公众号支付\r\n\t\t\t\tdata.method = this.paytype == 'wechat' && this.$util.isWeiXinBrowser() ? 'mp' : data.method;\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t//提交订单\r\n\t\t\t\tlet res;\r\n\t\t\t\tif (this.source === 'archives') {\r\n\t\t\t\t\tres = await this.$api.getArchivesOrder(data);\r\n\t\t\t\t} else if (this.source === 'vip') {\r\n\t\t\t\t\tres = await this.$api.goVipSubmit(data);\r\n\t\t\t\t}\r\n\t\t\t\tif (!res) {\r\n\t\t\t\t\tthis.$u.toast('参数错误！');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!res.code) {\r\n\t\t\t\t\tthis.$u.toast(res.msg);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//余额支付\r\n\t\t\t\tif (this.paytype == 'balance') {\r\n\t\t\t\t\tthis.$u.toast('支付成功！');\r\n\t\t\t\t\tthis.paySuccess();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\tuni.requestPayment({\r\n\t\t\t\t\tprovider: 'wxpay',\r\n\t\t\t\t\ttimeStamp: res.data.timeStamp,\r\n\t\t\t\t\tnonceStr: res.data.nonceStr,\r\n\t\t\t\t\tpackage: res.data.package,\r\n\t\t\t\t\tsignType: res.data.signType,\r\n\t\t\t\t\tpaySign: res.data.paySign,\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tthis.$u.toast('支付成功！');\r\n\t\t\t\t\t\tthis.paySuccess();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: err => {\r\n\t\t\t\t\t\tconsole.log('fail:' + JSON.stringify(err));\r\n\t\t\t\t\t\tthis.$u.toast('支付失败');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tuni.requestPayment({\r\n\t\t\t\t\tprovider: this.paytype == 'alipay' ? 'alipay' : 'wxpay',\r\n\t\t\t\t\torderInfo: res.data, //微信、支付宝订单数据\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tthis.$u.toast('支付成功！');\r\n\t\t\t\t\t\tthis.paySuccess();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(err) {\r\n\t\t\t\t\t\tconsole.log('fail:' + JSON.stringify(err));\r\n\t\t\t\t\t\tthis.$u.toast('支付失败');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tif (this.$util.isWeiXinBrowser() && this.paytype == 'wechat') {\r\n\t\t\t\t\t//在微信环境，且为微信支付\r\n\t\t\t\t\twindow.WeixinJSBridge.invoke(\r\n\t\t\t\t\t\t'getBrandWCPayRequest', {\r\n\t\t\t\t\t\t\tappId: res.data.appId,\r\n\t\t\t\t\t\t\ttimeStamp: res.data.timeStamp,\r\n\t\t\t\t\t\t\tnonceStr: res.data.nonceStr,\r\n\t\t\t\t\t\t\tpackage: res.data.package,\r\n\t\t\t\t\t\t\tsignType: res.data.signType,\r\n\t\t\t\t\t\t\tpaySign: res.data.paySign\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tres => {\r\n\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\tif (res.err_msg === 'get_brand_wcpay_request:ok') {\r\n\t\t\t\t\t\t\t\tthis.$u.toast('支付成功！');\r\n\t\t\t\t\t\t\t\tthis.paySuccess();\r\n\t\t\t\t\t\t\t} else if (res.err_msg === 'get_brand_wcpay_request:cancel') {\r\n\t\t\t\t\t\t\t\tthis.$u.toast('取消支付');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$u.toast('支付失败');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//非微信环境的wap 支付方法，会返回orderid，再模拟表单提交\r\n\t\t\t\t\tdata.returnurl = window.location.href;\r\n\r\n\t\t\t\t\t//URL地址\r\n\t\t\t\t\tif (res.data.toString().match(/^((?:[a-z]+:)?\\/\\/)(.*)/i)) {\r\n\t\t\t\t\t\tlocation.href = res.data;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (typeof res.code !== 'undefined' && res.code === 0) {\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\tthis.$u.toast(res.msg || \"支付失败\");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (typeof res.data.message !== 'undefined') {\r\n\t\t\t\t\t\tthis.$u.toast(res.data.message || \"支付失败\");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//Form表单\r\n\t\t\t\t\tdocument.getElementsByTagName('body')[0].innerHTML = res.data;\r\n\t\t\t\t\tlet form = document.querySelector('form');\r\n\t\t\t\t\tif (form && form.length > 0) {\r\n\t\t\t\t\t\tform.submit();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//Meta跳转\r\n\t\t\t\t\tlet meta = document.querySelector('meta[http-equiv=\"refresh\"]');\r\n\t\t\t\t\tif (meta && meta.length > 0) {\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\tlocation.href = meta.content.split(/;/)[1];\r\n\t\t\t\t\t\t}, 300);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.payment {\r\n\t\twidth: 600rpx;\r\n\r\n\t\t.header {\r\n\t\t\tborder-bottom: 1px solid #eee;\r\n\t\t\tbackground-color: #f8f8f8;\r\n\t\t}\r\n\r\n\t\t.alert-info {\r\n\t\t\tbackground-color: #d9edf7;\r\n\t\t\tborder-color: #bce8f1;\r\n\t\t\tcolor: #3498db;\r\n\t\t\tborder-radius: 6rpx;\r\n\t\t}\r\n\r\n\t\t.alert-warning {\r\n\t\t\tbackground-color: #fcf8e3;\r\n\t\t\tborder-color: #faebcc;\r\n\t\t\tcolor: #f39c12;\r\n\t\t\tborder-radius: 6rpx;\r\n\t\t}\r\n\r\n\t\t.price {\r\n\t\t\tcolor: red;\r\n\t\t}\r\n\r\n\t\t.group {\r\n\t\t\twidth: 100%;\r\n\t\t}\r\n\t}\r\n</style>","import mod from \"-!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./fa-payment.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\软件根目录\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./fa-payment.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1747145943900\n      var cssReload = require(\"E:/软件根目录/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}